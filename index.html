<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CWT Studio - Systems Architecture</title>
  <meta name="description"
    content="Revenue systems break. We find whereâ€”then install enforcement. For legal, healthcare, compliance, and SaaS teams.">
  <meta name="author" content="CWT Studio" />
  <link rel="canonical" href="https://cwtstudio.com" />

  <!-- Favicon - high priority -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

  <!-- Security Headers -->
  <meta http-equiv="X-Content-Type-Options" content="nosniff" />
  <meta http-equiv="X-Frame-Options" content="SAMEORIGIN" />
  <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin" />
  <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()" />

  <!-- Critical CSS inline for faster FCP/LCP -->
  <style>
    /* Critical above-the-fold styles */
    *,*::before,*::after{box-sizing:border-box}
    html{-webkit-text-size-adjust:100%;line-height:1.5}
    body{margin:0;font-family:'Inter',-apple-system,BlinkMacSystemFont,system-ui,sans-serif;background:#EBE9E3}
    #root{min-height:100vh}
    /* Navigation placeholder to prevent CLS */
    nav{height:80px;background:#1B3022}
    @media(max-width:640px){nav{height:64px}}
    /* Loading spinner - matches Suspense fallback */
    .loading-placeholder{min-height:calc(100vh - 80px);display:flex;align-items:center;justify-content:center;flex-direction:column;gap:1rem}
    .spinner{width:4rem;height:4rem;border:4px solid rgba(104,16,56,0.2);border-top-color:#681038;border-radius:50%;animation:spin 1s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
  </style>

  <!-- Preconnect for external resources (critical for LCP) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <!-- Load Inter font with optimal settings -->
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" media="print" onload="this.media='all'">
  
  <!-- JetBrains Mono - loaded async as non-critical -->
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap" media="print" onload="this.media='all'">
  
  <noscript>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600;700&display=swap">
  </noscript>
  
  <!-- Preload critical assets -->
  <link rel="preload" href="/src/assets/cwt-logo-white.svg" as="image" type="image/svg+xml">

  <!-- PWA & Service Worker -->
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#1B3022">

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://cwtstudio.com" />
  <meta property="og:image" content="https://cwtstudio.com/og-image.jpg">
  <meta property="og:title" content="CWT Studio | Backend Revenue Systems & Infrastructure">
  <meta property="og:description"
    content="Install backend revenue systems that scale. Assessment, Sprint, and Fractional Ops for legal, compliance, cybersecurity, and B2B SaaS.">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@cwtstudio" />
  <meta name="twitter:image" content="https://cwtstudio.com/og-image.jpg">
  <meta name="twitter:title" content="CWT Studio | Backend Revenue Systems & Infrastructure">
  <meta name="twitter:description"
    content="Install backend revenue systems that scale. Assessment, Sprint, and Fractional Ops for legal, compliance, cybersecurity, and B2B SaaS.">
</head>

<body>
  <div id="root">
    <!-- SSR placeholder for better FCP - will be replaced by React -->
    <nav></nav>
    <div class="loading-placeholder">
      <div class="spinner"></div>
      <div style="color:#9999A1;font-family:monospace;font-size:0.875rem">Loading...</div>
    </div>
  </div>
  
  <script type="module" src="/src/main.tsx"></script>

  <!-- Defer non-critical scripts -->
  <script defer>
    // Set viewport height CSS variable for mobile (CLS prevention)
    const setVh = () => {
      document.documentElement.style.setProperty('--vh', `${window.innerHeight * 0.01}px`);
    };
    setVh();
    window.addEventListener('resize', setVh, { passive: true });
    
    // Load Google Analytics after page is interactive (FID optimization)
    if (document.readyState === 'complete') {
      loadAnalytics();
    } else {
      window.addEventListener('load', loadAnalytics);
    }
    
    function loadAnalytics() {
      setTimeout(() => {
        const measurementId = "%VITE_GA4_MEASUREMENT_ID%";
        if (!measurementId || measurementId === "undefined" || measurementId === "" || measurementId.includes("VITE_")) return;

        const gtagScript = document.createElement("script");
        gtagScript.async = true;
        gtagScript.src = `https://www.googletagmanager.com/gtag/js?id=${measurementId}`;
        document.head.appendChild(gtagScript);

        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        window.gtag = gtag;
        gtag('js', new Date());
        gtag('config', measurementId, { send_page_view: false });
      }, 2000); // Delay analytics to prioritize interactivity
    }
  </script>
</body>

</html>